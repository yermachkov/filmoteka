!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},n={},o=t.parcelRequired76b;null==o&&((o=function(e){if(e in r)return r[e].exports;if(e in n){var t=n[e];delete n[e];var o={id:e,exports:{}};return r[e]=o,t.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},t.parcelRequired76b=o),o("4Nugj");var a=o("4Nugj"),i=o("jcFG7"),c=o("18yUV"),s=o("bq49u"),l=new(0,c.default);function u(){l.fetchTrendingFilms().then(h)}function d(){l.fetchFilmsOnSearch().then(h)}u();var f=document.querySelector(".pagination ul");function m(e){if("LI"===e.target.nodeName){a.refs.gallery.innerHTML="";var t=document.querySelectorAll(".numb"),r=document.querySelector(".arrow-right"),n=document.querySelector(".arrow-left");e.target===n&&(l.pageDecrement(),localStorage.setItem("page",JSON.stringify(l.getPage())),null!==l.searchQuery&&""!==l.searchQuery?d():u());var o=!0,i=!1,c=void 0;try{for(var s,f=t[Symbol.iterator]();!(o=(s=f.next()).done);o=!0){var m=s.value;e.target===m&&(l.setPage(Number(e.target.textContent)),localStorage.setItem("page",JSON.stringify(l.getPage())),null!==l.searchQuery&&""!==l.searchQuery?d():u())}}catch(e){i=!0,c=e}finally{try{o||null==f.return||f.return()}finally{if(i)throw c}}e.target===r&&(l.pageIncrement(),localStorage.setItem("page",JSON.stringify(l.getPage())),null!==l.searchQuery&&""!==l.searchQuery?d():u())}}f.addEventListener("click",m),a.refs.searchForm.addEventListener("submit",(function(e){e.preventDefault(),l.resetPage();var t=e.target.elements.userSearchQuery.value.trim();if(g.push(t),localStorage.setItem("respon",JSON.stringify(g)),l.query=t,""===l.searchQuery||" "===l.searchQuery)return a.refs.searchError.classList.remove("is-hidden"),void setTimeout((function(){a.refs.searchError.classList.add("is-hidden")}),3e3);l.fetchFilmsOnSearch().then((function(e){if(0===e.total_results){var t=JSON.parse(localStorage.getItem("respon"));console.log(t);var r=t.length-2;return console.log(t[r]),void 0===t[r]?(u(),l.query="",void a.refs.searchError.classList.remove("is-hidden")):(l.setPage(JSON.parse(localStorage.getItem("page"))),l.query=t[r],g.pop(),d(),a.refs.searchError.classList.remove("is-hidden"),void setTimeout((function(){a.refs.searchError.classList.add("is-hidden")}),3e3))}a.refs.searchError.classList.add("is-hidden"),d(),console.log(g),f.addEventListener("click",m)}))}));var g=[];function h(e){console.log(e);var t=e.page,r=e.total_pages;(0,s.renderGallery)(e.results),(0,i.default)(r,t)}o("7F1pg"),o("gHeeA"),o("4xL4O"),o("j1lrD");var v,p=o("bpxeT"),y=o("dDDEV"),b=o("2TvXO"),w=(c=o("18yUV"),o("6D8Ko")),L=o("jzQFI"),T=(o("jzQFI"),L=o("jzQFI"),new(0,c.default)),x="",S="Add to watched",E="Add to queue",k="Remove from watched",F="Remove from queue",q={gallery:document.querySelector(".gallery"),backdrop:document.querySelector(".modal-backdrop"),closeFilmModalBtn:"",addToWatched:"",addToQueue:""};function Q(e){return N.apply(this,arguments)}function N(){return(N=e(p)(e(b).mark((function t(r){return e(b).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),v=r.target.dataset.id,"IMG"===r.target.nodeName){e.next=4;break}return e.abrupt("return");case 4:return W(),e.next=7,M(v);case 7:q.gallery.removeEventListener("click",Q),q.addToWatched.addEventListener("click",P),q.addToQueue.addEventListener("click",j);case 10:case"end":return e.stop()}}),t)})))).apply(this,arguments)}(0,L.checkItemInStorage)("watchedFilms","queueFilms",[]),q.gallery.addEventListener("click",Q);var C,M=(C=e(p)(e(b).mark((function t(r){var n,o,a;return e(b).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,T.fetchFilmById(r);case 3:return n=t.sent,t.next=6,n.genres.map((function(e){return e.name})).join(", ");case 6:return o=t.sent,a=e(y)({},n,{listOfGenders:o}),x=(0,w.filmModalMarkup)(a),q.backdrop.innerHTML=x,document.body.style.overflow="hidden",q.closeFilmModalBtn=document.querySelector("[data-modal-close]"),q.addToWatched=document.querySelector(".add-to-watched"),q.addToQueue=document.querySelector(".add-to-queue"),t.next=16,A(r);case 16:return t.next=18,B(r);case 18:return t.next=20,H();case 20:return q.closeFilmModalBtn.addEventListener("click",O),q.backdrop.addEventListener("click",D),window.addEventListener("keydown",I),t.abrupt("return",q.backdrop);case 26:t.prev=26,t.t0=t.catch(0),console.log(t.t0.message);case 29:case"end":return t.stop()}}),t,null,[[0,26]])}))),function(e){return C.apply(this,arguments)});function O(e){e.preventDefault(),q.gallery.addEventListener("click",Q),W(),q.backdrop.innerHTML="",document.body.style.overflow="",_()}function I(e){e.preventDefault(),"Escape"===e.code&&(q.gallery.addEventListener("click",Q),W(),q.backdrop.innerHTML="",document.body.style.overflow="",_())}function D(e){e.preventDefault(),e.currentTarget===e.target&&(q.gallery.addEventListener("click",Q),W(),q.backdrop.innerHTML="",document.body.style.overflow="",_())}function W(){q.backdrop.classList.toggle("is-hidden")}function _(){q.closeFilmModalBtn.removeEventListener("click",O),window.removeEventListener("keydown",I),q.backdrop.removeEventListener("click",D)}function P(e){e.preventDefault(),v=e.target.dataset.modalaction,null==localStorage.getItem("watchedFilms")&&(0,L.addToStorageWhenNull)("watchedFilms",v),(0,L.inStorageWatched)(v)?((0,L.removeFromStorage)("watchedFilms",v),q.addToWatched.textContent=S,q.addToWatched.classList.remove("is-in-storage")):((0,L.addToStorage)("watchedFilms",v),q.addToWatched.textContent=k,q.addToWatched.classList.add("is-in-storage"))}function j(e){e.preventDefault(),null==localStorage.getItem("queueFilms")&&(0,L.addToStorageWhenNull)("queueFilms",v),(0,L.inStorageQueue)(v)?((0,L.removeFromStorage)("queueFilms",v),q.addToQueue.textContent=E,q.addToQueue.classList.remove("is-in-storage")):((0,L.addToStorage)("queueFilms",v),q.addToQueue.textContent=F,q.addToQueue.classList.add("is-in-storage"))}function A(e){(0,L.inStorageWatched)(e)?(0,L.inStorageWatched)(e)&&(q.addToWatched.textContent=k):q.addToWatched.textContent=S}function B(e){(0,L.inStorageQueue)(e)?(0,L.inStorageQueue)(e)&&(q.addToQueue.textContent=F):q.addToQueue.textContent=E}function H(){q.addToWatched.textContent===S?q.addToWatched.classList.remove("is-in-storage"):q.addToWatched.classList.add("is-in-storage"),q.addToQueue.textContent===E?q.addToQueue.classList.remove("is-in-storage"):q.addToQueue.classList.add("is-in-storage")}p=o("bpxeT"),b=o("2TvXO"),c=o("18yUV");var U={};U=function e(t,r,n){function o(i,c){if(!r[i]){if(!t[i]){var s=void 0;if(!c&&s)return s(i,!0);if(a)return a(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var u=r[i]={exports:{}};t[i][0].call(u.exports,(function(e){return o(t[i][1][e]||e)}),u,u.exports,e,t,r,n)}return r[i].exports}for(var a=void 0,i=0;i<n.length;i++)o(n[i]);return o}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.create=r.visible=void 0;var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=document.createElement("div");return r.innerHTML=e.trim(),!0===t?r.children:r.firstChild},o=function(e,t){var r=e.children;return 1===r.length&&r[0].tagName===t},a=function(e){return null!=(e=e||document.querySelector(".basicLightbox"))&&!0===e.ownerDocument.body.contains(e)};r.visible=a,r.create=function(e,t){var r=function(e,t){var r=n('\n\t\t<div class="basicLightbox '.concat(t.className,'">\n\t\t\t<div class="basicLightbox__placeholder" role="dialog"></div>\n\t\t</div>\n\t')),a=r.querySelector(".basicLightbox__placeholder");e.forEach((function(e){return a.appendChild(e)}));var i=o(a,"IMG"),c=o(a,"VIDEO"),s=o(a,"IFRAME");return!0===i&&r.classList.add("basicLightbox--img"),!0===c&&r.classList.add("basicLightbox--video"),!0===s&&r.classList.add("basicLightbox--iframe"),r}(e=function(e){var t="string"==typeof e,r=e instanceof HTMLElement==1;if(!1===t&&!1===r)throw new Error("Content must be a DOM element/node or string");return!0===t?Array.from(n(e,!0)):"TEMPLATE"===e.tagName?[e.content.cloneNode(!0)]:Array.from(e.children)}(e),t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null==(e=Object.assign({},e)).closable&&(e.closable=!0),null==e.className&&(e.className=""),null==e.onShow&&(e.onShow=function(){}),null==e.onClose&&(e.onClose=function(){}),"boolean"!=typeof e.closable)throw new Error("Property `closable` must be a boolean");if("string"!=typeof e.className)throw new Error("Property `className` must be a string");if("function"!=typeof e.onShow)throw new Error("Property `onShow` must be a function");if("function"!=typeof e.onClose)throw new Error("Property `onClose` must be a function");return e}(t)),i=function(e){return!1!==t.onClose(c)&&function(e,t){return e.classList.remove("basicLightbox--visible"),setTimeout((function(){return!1===a(e)||e.parentElement.removeChild(e),t()}),410),!0}(r,(function(){if("function"==typeof e)return e(c)}))};!0===t.closable&&r.addEventListener("click",(function(e){e.target===r&&i()}));var c={element:function(){return r},visible:function(){return a(r)},show:function(e){return!1!==t.onShow(c)&&function(e,t){return document.body.appendChild(e),setTimeout((function(){requestAnimationFrame((function(){return e.classList.add("basicLightbox--visible"),t()}))}),10),!0}(r,(function(){if("function"==typeof e)return e(c)}))},close:i};return c}},{}]},{},[1])(1);var G,J,V=[],R=new(0,c.default),z={gallery:document.querySelector(".gallery"),watchTrailer:""};function X(){return(X=e(p)(e(b).mark((function t(r){return e(b).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("IMG"===r.target.nodeName){e.next=2;break}return e.abrupt("return");case 2:return G=r.target.dataset.id,e.next=5,K(G);case 5:case"end":return e.stop()}}),t)})))).apply(this,arguments)}z.gallery.addEventListener("click",(function(e){return X.apply(this,arguments)}));var K=function(){var t=e(p)(e(b).mark((function t(r){var n;return e(b).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.fetchTrailerById(r);case 3:n=e.sent,J=null,V=[],n.results.forEach((function(e){if(e.name.includes("Official")){var t=e.key;V.push("https://www.youtube.com/embed/".concat(t)),J=V[0]}})),setTimeout((function(){z.watchTrailer=document.querySelector(".player"),z.watchTrailer.addEventListener("click",Y)}),500),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.message);case 13:case"end":return e.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}();function Y(){null!=J?U.create("\n    <iframe src='".concat(J,'\'frameborder="0" allowfullscreen class="trailer_video"></iframe>')).show():z.watchTrailer.textContent="trailer is not found"}c=o("18yUV");var Z=o("9ekLB");(new(0,c.default)).fetchGenres().then((function(e){(0,Z.save)("genres",e.genres)})),o("eBemh")}();
//# sourceMappingURL=index.0f0d8f9a.js.map
